---
categories: data
tag: data
toc: true
toc_sticky: true
author_profile: false
use_math: true 
images: 
---

# 웹 크롤링 기초 가이드

> **웹 크롤링**은 웹에서 데이터를 자동으로 수집하는 기술이다. 이 가이드는 파이썬을 사용한 기본적인 웹 크롤링 방법을 다룬다.

---

## 개요

**웹 크롤링(Web Crawling)**이란 웹에 있는 정보를 자동으로 가져와서 내가 필요한 데이터만 추출하는 작업이다.

파이썬에서는 **requests**와 **BeautifulSoup**이라는 라이브러리를 통해 간단하게 구현할 수 있다.

### 크롤링 프로세스 흐름
```
웹사이트 → HTML 가져오기 → 파싱 → 데이터 추출 → 활용
```

---

## 기본 크롤링 과정

### 1. 라이브러리 임포트

```python
import requests  
from bs4 import BeautifulSoup
```

**설명:**
- **requests**: 특정 웹 페이지에 접속하고, 그 페이지의 HTML을 파이썬 코드로 가져오기 위해 사용한다
- **BeautifulSoup**: HTML 문서를 구조적으로 분석해 내가 원하는 정보를 쉽게 추출할 수 있도록 도와주는 라이브러리이다

이 두 라이브러리는 크롤링을 할 때 기본 도구라고 생각하면 된다

### 2. 웹 페이지 가져오기

```python
res = requests.get('http://v.media.daum.net/v/20170615203441266')
```

**설명:**
- `requests.get(URL)`은 해당 URL의 HTML 데이터를 요청(request)하는 함수이다
- 반환된 `res` 객체에는 다양한 정보가 담겨 있으며, **웹사이트의 전체 HTML 코드**는 `res.content`로 확인할 수 있다

**res.content의 특징:**
- HTML 소스 전체가 **바이트(byte) 형태**로 들어있다
- 실제 페이지 소스 보기(Ctrl + U) 했을 때와 비슷한 HTML 코드가 출력된다

### 3. 웹 페이지 파싱(Parsing) 하기

```python
soup = BeautifulSoup(res.content, 'html.parser')
```

**설명:**
- HTML 문서를 **'html.parser' 파서(parser)**를 사용해 BeautifulSoup 객체로 변환한다
- 이 과정은 **단순 텍스트인 HTML을 구조화된 트리 구조**로 바꾸어 주며, 이후에 원하는 정보를 쉽게 찾을 수 있다

`soup` 객체는 HTML 트리 전체를 메모리에 가지고 있으며, 이 안에서 `find`, `find_all`, `select` 같은 함수로 원하는 태그를 탐색할 수 있다

### 4. 원하는 데이터 추출하기

```python
mydata = soup.find('title')  
print(mydata.get_text())
```

**설명:**
- `soup.find('태그명')`: HTML 안에서 첫 번째로 해당 태그를 찾아 반환
  - 여기서는 `<title>` 태그를 찾는다
- `.get_text()`: 해당 태그 내부의 **순수 텍스트**만 추출 (HTML 태그 제거됨)

**예시 결과:**
```html
<title>문재인 "한·미, 북핵 문제 해결 위해 긴밀히 협의"</title>

get_text() 실행 결과:
문재인 "한·미, 북핵 문제 해결 위해 긴밀히 협의"
```

### 5. 추출한 데이터 활용하기

```python
print(mydata.get_text())
```

이렇게 추출한 데이터를 출력할 수도 있고, 파일에 저장하거나, 다른 분석 작업에 활용할 수도 있다

**예시:**
```python
# 파일로 저장  
with open('headline.txt', 'w', encoding='utf-8') as f:  
    f.write(mydata.get_text())
```

---

## 재사용 가능한 기본 패턴

```python
import requests  
from bs4 import BeautifulSoup  
  
res = requests.get('URL을 여기에 입력하세요')  
soup = BeautifulSoup(res.content, 'html.parser')  
data = soup.find('찾고 싶은 태그')  
print(data.get_text())
```

**바꿔야 할 두 부분:**
1. `requests.get()` 안의 **URL**
2. `soup.find()` 안의 **HTML 태그명**
   (또는 class, id 등을 활용한 조건 검색 가능)

---

## 추가 팁

### 태그 외에도 속성으로 검색 가능

예를 들어, 특정 class나 id를 가진 요소를 찾고 싶다면?

```python
soup.find('p', class_='special')  
soup.find(id='headline')
```

또는 여러 개를 찾고 싶다면:

```python
soup.find_all('p')  # 모든 <p> 태그 반환 (리스트 형태)
```

---

## 웹 기본 구조 이해하기

### HTML 웹 문서의 구조

HTML 웹 문서의 구조는 대략 아래와 같이 되어 있다

```html
<html>  
  <head>  
    <title>웹페이지 제목</title>  
  </head>  
  <body>  
    <p class="normal">본문 첫 번째 문장</p>  
    <p class="special">두 번째 문장 <b>굵게 표시됨</b></p>  
  </body>  
</html>
```

**주요 태그 설명:**
- `<html>`: 문서의 루트 요소
- `<head>`: 문서의 설정(제목, 스타일 등)이 들어가는 부분
- `<title>`: 브라우저 탭에 표시될 제목
- `<body>`: 본문 내용이 들어가는 영역
- `<p>`: 단락(문단), `<b>`: bold(굵은 글씨)

---

## 웹페이지의 구성요소

### HTML, CSS, JavaScript

웹 페이지는 크게 세 가지 언어로 구성된다:

| 언어 | 역할 | 설명 |
|:-----|:-----|:-----|
| **HTML** | 구조(structure) | 웹페이지의 뼈대 |
| **CSS** | 디자인(스타일) | 색상, 글꼴, 정렬 등 |
| **JavaScript** | 동작/기능 | 클릭, 애니메이션 등 |

### HTML 이해하기 (웹 크롤링의 핵심)

**HTML이란?**
- **HyperText Markup Language**의 약자
- 웹 페이지의 정보를 표시하는 마크업 언어
- `<태그>`를 사용해 구조를 정의한다

**HTML 기본 구조 예시:**

```html
<html>  
  <head>  
    <title>웹페이지 제목</title>  
  </head>  
  <body>  
    <h1>큰 제목</h1>  
    <p>본문 내용입니다</p>  
  </body>  
</html>
```

**구성 요소 설명:**
- `<html>`: HTML 문서의 전체를 감싸는 태그
- `<head>`: 문서 정보(제목, 문자 인코딩 등)
- `<title>`: 브라우저 탭에 표시되는 제목
- `<body>`: **화면에 표시되는 실제 내용**

### 태그(tag)의 형식

```html
<b>Hello HTML</b>
```

**구성 요소:**
- 시작 태그: `<b>`
- 종료 태그: `</b>`
- 태그 내부에 쓰이는 문자열: **텍스트 콘텐츠**
- 태그는 **중첩**이 가능하다

```html
<p>이 문장 안에 <b>굵은 글씨</b>가 있어요.</p>
```

### HTML 태그의 속성(attribute)

속성은 태그 안에서 다양한 부가정보를 제공한다

**예:**
```html
<img src="dimg.png" width="100" height="100">
```

- `<img>`: 이미지 삽입 태그
- `src`: 이미지 파일 경로
- `width`: 가로 길이
- `height`: 세로 길이

태그마다 가질 수 있는 속성이 다르며, **크롤링 시 속성값(class, id 등)을 활용해 데이터를 찾는다**

### 중요 속성 – id, class

이 두 속성은 **특정 요소를 지정하거나 스타일을 적용할 때, 또는 크롤링 시 데이터를 정확히 찾는 데 매우 중요**하다

```html
<h1 id="title">웹 제목</h1>  
<p class="content">본문입니다</p>
```

- `id="title"`: 고유한 식별자 (하나의 HTML 문서 내에 하나만 존재)
- `class="content"`: 같은 스타일이나 그룹을 묶을 때 사용 (여러 요소에 반복 사용 가능)

크롤링할 때 BeautifulSoup에서 `find(id='title')`, `find(class_='content')`와 같이 활용된다

### 문자 인코딩 – `<meta charset="utf-8">`

HTML 파일을 브라우저에서 열었을 때 **글자가 깨지는 현상**을 방지하기 위해 사용한다

```html
<head>  
  <meta charset="utf-8">  
</head>
```

UTF-8은 전 세계 언어를 표현할 수 있는 문자 인코딩 방식으로 **한글 크롤링 시 필수**이다

### HTML의 다양한 태그 예시

| 태그 | 설명 | 크롤링 활용 |
|:-----|:-----|:-------------|
| `<h1>`~`<h6>` | 제목 (숫자가 작을수록 글자가 큼) | 제목 추출 |
| `<p>` | 문단 | 본문 내용 추출 |
| `<a href="URL">` | 하이퍼링크 | 링크 URL 추출 |
| `<img src="이미지경로">` | 이미지 삽입 | 이미지 URL 추출 |
| `<table>`, `<tr>`, `<td>` | 표(Table) 작성 | 표 데이터 추출 |
| `<div>`, `<span>` | 구역 설정/구조화 요소 | 특정 영역 추출 |

이런 태그를 잘 알고 있어야 **크롤링할 때 내가 원하는 데이터가 어디에 들어있는지 파악**할 수 있다

---

## HTML 코드 분석 예시

### 전체 코드 분석 - htmlbasic.html

```html
<!DOCTYPE html>
<html>
<head>
    <title>HTML TEST</title>
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="css/style.css">
</head>
<body>
    <b>안녕</b><br>
    <img src="python-logo.png">
    
    <table border="1" width="500">
        <thead>
            <tr>
                <th>title1</th>
                <th>title2</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td class="highlight">안녕1</td>
                <td>안녕2</td>
            </tr>
        </tbody>
    </table>
</body>
</html>
```


**각 요소 설명:**

| 태그 | 설명 | 크롤링 활용 |
|:-----|:-----|:-------------|
| `<!DOCTYPE html>` | HTML5 문서 선언 | - |
| `<html>` | 전체 HTML 문서 시작 | - |
| `<head>` | 문서 설정 정보 | - |
| `<title>` | 브라우저 탭 제목 | 페이지 제목 추출 |
| `<meta charset="utf-8">` | UTF-8 인코딩 설정 | 한글 깨짐 방지 |
| `<link>` | CSS 파일 연결 | - |
| `<body>` | 실제 콘텐츠 영역 | - |
| `<b>` | 굵은 글씨 | 강조 텍스트 추출 |
| `<br>` | 줄 바꿈 | - |
| `<img>` | 이미지 삽입 | 이미지 URL 추출 |
| `<table>` | 표 생성 | 표 데이터 추출 |
| `<thead>` | 표 헤더 영역 | - |
| `<tr>` | 표 행 | - |
| `<th>` | 표 제목 셀 | 헤더 추출 |
| `<tbody>` | 표 본문 영역 | - |
| `<td>` | 표 데이터 셀 | 셀 데이터 추출 |
| `class="highlight"` | CSS 클래스 지정 | 특정 스타일 요소 추출 |

**전체 구조 요약:**

| 구역 | 설명 | 크롤링 대상 |
|:-----|:-----|:-------------|
| `<head>` | 문서 정보 (제목, 문자 인코딩, CSS 연결 등) | 제목, 메타데이터 |
| `<body>` | 사용자 화면에 표시될 실제 콘텐츠 | 모든 콘텐츠 |
| `<b>` | 텍스트를 굵게 표시 | 강조 텍스트 |
| `<br>` | 줄 바꿈 | - |
| `<img>` | 이미지 삽입 | 이미지 URL |
| `<table>` | 표 생성 (제목 + 본문) | 표 데이터 |
| `<th>` | 표의 제목 셀 (헤더) | 헤더 정보 |
| `<td>` | 표의 데이터 셀 (본문) | 셀 데이터 |
| `class="..."` | CSS로 스타일을 지정하기 위한 이름 지정 | 특정 클래스 요소 |

---

## CSS 이해하기

### CSS란?
- **Cascading Style Sheets**
- HTML 태그를 꾸미는 언어 (디자인 전담)
- 예: 글자 색, 글자 크기, 정렬 방식 등 지정

### CSS 적용 방식 3가지

| 방식 | 설명 | 예시 | 장단점 |
|:-----|:-----|:-----|:--------|
| 인라인 스타일 | 태그에 직접 작성 | `<p style="color:red;">문장</p>` | 간단하지만 재사용 어려움 |
| 내부 스타일 | HTML 안의 `<style>` 태그 | `<style> p { color:red; } </style>` | 한 페이지에만 적용 |
| 외부 스타일 | 별도 CSS 파일로 연결 | `<link rel="stylesheet" href="style.css">` | 재사용성 높음 |

### 자주 쓰이는 CSS 속성

| 속성 | 설명 | 값 예시 | 크롤링 활용 |
|:-----|:-----|:---------|:-------------|
| `color` | 글자 색 | red, #0277BD | 색상 정보 추출 |
| `font-size` | 글자 크기 | 16px, 2em | 크기 정보 추출 |
| `font-family` | 글꼴 | Gulim, Arial | 폰트 정보 추출 |
| `text-align` | 텍스트 정렬 | left, center, right | 정렬 정보 추출 |

### 예시 CSS - style.css

```css
td {
    font-size: 2em;
    font-family: Gulim;
    text-align: center;
}

.highlight {
    font-size: 3em;
    text-align: right;
    color: blue;
}
```


**td 선택자:**
이 스타일은 모든 `<td>` 태그에 적용된다 (즉, 테이블의 일반적인 데이터 셀에 적용)

| 속성 | 의미 | 크롤링 활용 |
|:-----|:-----|:-------------|
| **font-size: 2em;** | 글자 크기를 기본보다 2배 크게 표시한다 | 크기 정보 추출 |
| **font-family: Gulim;** | 글꼴을 굴림체로 지정한다 | 폰트 정보 추출 |
| **text-align: center;** | 텍스트를 가운데 정렬한다 | 정렬 정보 추출 |

**적용 예시:**
```html
<td>표 내용</td> → 글자가 굴림체, 크기 2배, 가운데 정렬
```

**'.highlight' 클래스 선택자:**
이 스타일은 `class="highlight"`속성을 가진 요소에만 적용된다

**예: `<td class="highlight">강조된 셀</td>`**

| 속성 | 의미 | 크롤링 활용 |
|:-----|:-----|:-------------|
| **font-size: 3em;** | 글자를 기본보다 3배 크게 표시 | 크기 정보 추출 |
| **text-align: right;** | 텍스트를 오른쪽 정렬 | 정렬 정보 추출 |
| **color: blue;** | 글자 색을 파란색으로 설정 | 색상 정보 추출 |

**HTML에서 사용 예시:**
```html
<td class="highlight">안녕1</td>
```
→ 이 셀은 3배 크기의 파란 글씨로, 오른쪽 정렬되어 나타난다

### td vs .highlight 우선순위

- **td는 모든 `<td>` 태그에 적용되는 기본 스타일**
- **.highlight는 특정한 `class="highlight"`가 지정된 셀에만 적용되는 우선 스타일**

**같은 요소에 두 스타일이 동시에 적용되면, .highlight가 더 우선한다**

**예:**
```html
<td class="highlight">적용 결과</td>
```

**최종 적용 결과:**
- **글꼴: Gulim (기본 td에서 적용)**
- **글자 크기: 3em (.highlight가 덮어씀)**
- **정렬: right (.highlight가 덮어씀)**
- **색상: blue (.highlight에만 있음)**

### 정리

| 선택자 | 적용 대상 | 스타일 | 크롤링 활용 |
|:-------|:----------|:-------|:-------------|
| **td** | **모든 `<td>` 태그** | **글자 크기 2배, 굴림체, 가운데 정렬** | 기본 셀 스타일 정보 |
| **.highlight** | **class="highlight"가 있는 태그** | **글자 크기 3배, 파란색, 오른쪽 정렬** | 특별한 스타일 정보 |

### 추가 팁

**.highlight 클래스는 다른 태그에도 적용할 수 있다:**

```html
<p class="highlight">강조된 문장</p>
```

**여러 클래스를 같이 쓸 수도 있다:**

```html
<td class="highlight special">문장</td>
```

**CSS는 코드 재사용과 유지보수에 매우 유리하다**
**크롤링할 때는 이런 class 정보를 이용해 HTML 구조에서 필요한 데이터를 뽑아낼 수 있다**

---

## 크롤링을 위한 핵심 요약

| 요소 | 설명 | 크롤링에서의 역할 |
|:-----|:-----|:------------------|
| `<태그>` | 웹페이지 구성 단위 | 원하는 데이터가 들어있는 위치를 파악 |
| `id`, `class` | 태그의 속성 | 특정 데이터를 정확하게 찾는 기준 |
| `<meta charset="utf-8">` | 문자 인코딩 | 한글 깨짐 방지 |
| CSS 스타일 | 시각적 표현 담당 | 직접적 데이터는 아니지만, 위치나 의미를 유추할 때 도움 |

---

## 마무리

이 문서는 웹 크롤링의 **가장 기본적인 흐름과 패턴**을 익히는 데 초점이 맞춰져 있다

한 번 따라해보면서 아래 5단계 흐름을 체득하면, 다양한 사이트에 응용이 가능하다:

### 크롤링 5단계 프로세스


1. **라이브러리 임포트** - requests, BeautifulSoup
2. **HTML 가져오기** - requests.get()
3. **HTML 파싱** - BeautifulSoup()
4. **원하는 요소 찾기** - find(), get_text()
5. **데이터 활용하기** - 출력, 저장, 가공 등

---

## 마무리 조언

웹 크롤링을 제대로 하려면:

* **HTML 구조를 잘 이해하고 있어야 하며**
* **id, class, `<div>`, `<p>` 등이 어떻게 쓰이는지** 익숙해져야 한다
* **크롬 개발자 도구(F12)**를 통해 웹사이트 구조를 살펴보는 습관도 중요하다

### 크롤링 성공을 위한 체크리스트

- [ ] HTML 기본 구조 이해
- [ ] requests, BeautifulSoup 라이브러리 설치
- [ ] 크롬 개발자 도구 사용법 숙지
- [ ] 기본 크롤링 패턴 연습
- [ ] 다양한 웹사이트에 응용해보기

